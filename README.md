Link to PyShiny app (complete)
https://shinylive.io/py/app/#code=NobwRAdghgtgpmAXGKAHVA6VBPMAaMAYwHsIAXOcpMAYgAIBaJ5l1t9jjgHQnoEkYqYgCcyAZzpQydMgAs4M4qkZ0ACtgDKsgJYRsdAKIANVQCUDGjXQBqB0xr4B5AHI96nD569MebugDFhYhg6MR09PDptQRFpACsAVzFpYTgoQjJtADcFKAgAEzpUgrhhHgAzIJCw3X1ooVEitIzsuEji-NLfXgCq0PDsDDgAD1RUsTFI+ti6ROS6BO1JAqiIVATxKPK6CDg4TvyKvpq9IdHxiWnGxe7+GNEJSuC1bDlSOg0yPPyoYUKAGW0ACNhL99GRiKFogkADZSBQw1p0H5fHhXFLfYJHZ4ouCZeBRe7SXH4uDYkIkGEwuAtUiXInIuAARwSZIgfgEDWkqG+UEeIjoAHcRABrXQAcyF2jkyKkUDRDJ5BT5kgkqEO7J6UHyhXKUCy2hIEAkELo2GICWETRZ2lS8HIYgwZGG0jcsjIZFQYkQAHofeVSF9BXAxME4BgSDAfWI0sJCLJyXQ9Ya6YSuVEjQB9MRZSV0W6cmbi0GocKSjbaRFkbAK9OoGHEMgwwYjMYhiQq1DDRMnbCC7T5cV4+npjqlTP1xvN26Mbxz+cMPxaWqGEzmSw2OwOFx+Bd7zwz-dH9h+fy25KRGPSKB0I3JPLSACqqgAIgBBAAqBjofGcX9M1hvv8SYClAVJ0IiOSyqiPQAMJ0l8DqSKkCxiAkYHNoy5S6PsqwLOgpSEHyCJ4hQwhiH4j4xpIMjYKgCjhNIpowFAIoKNKt7Ur8MiyFIURkAA5B2ECrBQQ5WgAFIgokAJS7seCk+Jqz7vl+ma-v+gH-JmGgGLBGjSbo0gALx0AAjIeikKRyEDStoYHaAAXrkdDmG+sEfnwtg2EBj7fv2Mo3pGMDvCiN7JMICQZJabL0B+8hNOkmRQVkYGslEEhJLhprJCICj3hQdASboAbCCxmSkHJPRUbhQL6BhPEKPk2hiPWUD6JGQi7Ehch8WExCCjxLUQUiYUYH48XDakSVIqlMLpcNN6CiW9FWr8ForDeL4GAAin5dDENs03NRA4oUT0VnWZq217QYOl8AAWgYhnkHQpkAKw8NNLQ5Jmc2spmy1oKtb2JT94b-XAEmdCyUMscM1IQMZN1+fdT0yVVPAALJvkYmYo3dDhPaDZkAAyWZd+42XZDnOTRbkeV536wUBsE8XxDXNa1cIdcEXWUJsREiURVJ+KaQ5MQlcIUPMYXLIUXNtXUZDjT08UKCLhCwlI2jvMNuhzQO8KFHAOTCPoKmfndGl2FpOl6RoYuQmQwjaOK4n4bijocikeKWsaNFkAk9YKAFsh0KbpSvGWOx7AcijIi1SuNdBUCq-Q1hRxHfLgpCrbfAdVohc15SDPJlN7t0AAC33JeGmsSVVnRHc0deZpr7fBECOH5I3iA8HQg90PwECG7iQ0SJr2sVSJkfm3QltqTbAFAfb+kJy7bse8HXsD0PtetBgBsObimbS6UEmL9bf626vun6ZjIlD-QL5ynQQ67KCM8QcQ4qGnvg8KCCFBkEBIBQJKggKMEDAYDtClRgBJBgZkAAckQkEADYZKRDMlVIeMhoghi+MA0yJICEYAgANRuGAIrlFJBJLgYAACkABNBgjCYBsMKIwgAEogRhWM+GOzALgoeuxBSZmarSaA5tMwC3nqZEADCgGoAYYgZRkQlEEPvIIVRpJtGoAAL7dDwfQCWKcYbpQLsDSghQ5AKDERHcg5sAFgzbpDQGK1SgYAllQ6x4CxESMNDPMEsinHYEfiYugABxPENExDQC9LIRsB1th2NvJaYoxJmTpVKssfQ5RLR2KtGMYghB2wShcRYuA2YEn9RMq41of00rVKBgRYQ3i8SN2Mc-AIAoXxJx5tJeCo9ShZNhgnV+XxAiwAULkxWPNKnbFMuqDAkyoDTPgNDbJ1T4loDqREnp-g+kDPatJGJksETwllkE3W0j9ByJrE-Qe59kiBKkSEh5oMAmSOCTIh53TB70FMH7YQIkbxBxDlKGUc9o4SiFPYuOLj6AGDNuCAh8LbwNTkMNApEApGRGDAJcCZisXyGopDc6eDUhB1BYyWGNS9lJLIJEfI5RIgvLIG8352BQku0ed0PwL44DYV2CnZcegF58DUFAIcEF2oWjIH4WCpKFCLCwDK6pShxCNyTGAqRS5YmZCbAoU04VN6nTwiyRsIZ2bSH7OBax3E+JpIhConoGhYnYSpFAIE1IE4fkiiayEWUU6CiSX6nksr+z5BlLktJj4+DdDVZGzVqBtVGupMZBh6hxX6AMOcds0lARQTWXQAA6tKcO1hml0GVX8IqRzXpvmDKGAkfAjR0AANR0AAMyhHNWdOS+AkyVjhL6uAxkA2skfvQDQA44BAm4sNasqBDQYX0FlXUAospWiMqUGapAfQlREOVW5fhnDWtDZW-t8J7RMUhIQaahU0liHnYuq0AYqQDVqvVW8xAGyamRai7FFrdAp1fZ0d9GVVidHILhO8LUKDkGbIuTUYcFjaGoW+34EklCUCzWAPD7JhH901IPNVsgABM9CwBvnIL8FohBDCjAbKkMow7CBwgmJmAjFAXQMDKXB9jIjk30KeXg-MtHGQhWNC7HW7xDqJRhAwUkMg4CCH3TShQx0JSXBEnRr4cZMhEXGvgFxeDON8jEDxpRIwyACYFl0Mz4mROYdkMILpT8KPoJo4CCAIpvQMNcxgKAYmJNDwYVE6U3CEhAg+BaOMCgGB0AAFLRLyOaBheBzND3c8Kgj7pPTej9H-OQsWIzBB9Cl9IYo4BRIy8QH0hA93KdJu9ATe7iBKHQP+rLOXAG-AlgRzMvq8gij60-YLoX+uSai2QGLcW3zoBUGl+rehiATfC4PPL5QCsei9L6KrNXtB1Ya94yt5XdZNZawwNrHW4Mwk21twzQ2GEjbhP5hhe8ps0ZzQMLLdAdt7aK4d3sWBiCvpViQH0OAfQA-6y9vEw3RufbAN9mcfARK5uY22CYkQYUgclBQ6QYGX3Yd3XplOLEwNKjgI9tD161U8wVZ3eaMBjR9xcehtV7igTEGGGFiL4m8H9UFERGMxkUwQGzLmGjyjNMxQYL8IIgoGDByC9l4XQ87HwAI0CcUDBj1fZc6RmbDDYIZIFnQD86nVpSBisbmbNcbFeL44qrXg9m6J25u1TMyjOce4k19tHYBzkpw5YlE6koC7Uv9oHW3CuUIRQqSH43W2JNVIZYkxsLK2Vyplpyn5tyPlhJAa3RpHdIzd12L3ER6fB6x9peUBhIAOVcuL38sJwABLKIEgAXQMbWx3geGGCl+PAK0vURJJHQo9tHZH8wL8HtzzDRE-gSQKVSbMj69hIynXAGSpH09qrX-kTM8htQX3N5b16kzcgrA-AQoLAKJPO5KO0t3M2vfzN93Qw-M28Fg9ItDUpYrlfZtQ4UY8QUwV8F4B9F+1XZTogD5968h5M9dls9mVkQ8828i9SAS8+Uy8ZpfpK8u4e5PNUCG9oCkwW9cCbl8DO8+Vu89EiFUB+8jF583B+kfdwQEpS0Nk2QV8MBmcNhWcEh2cxAA88EhDT8pCtsT9fgz8L9OgPNr9hBMk6A1kgtF90838VCMAwpMxKgZkv9hVvclYJFyg5DUDkCw80kI8dMLUoCaUYCwpjCCR0MtZ1CrdHCzpkCAC0Dtks86lc92UwD28GCeVPlTID4SCwJCBO4YBq99gKDKCVkrxMwtVbkJIBIf9Bho05ABJIgL1dgZJ096Aao6B4ZoQQgCiExA8qVqCxx2k1kolXZe5WUCUBw5ACMyZSZGFtCAjB4eAhCRDOVKRxCOd-9xMZDFDrCJMFC-hz80gVCaMLdvDXobcNMv4YprcOhn8Gjh4fxbJMhaZ78I5BBqwR1xQHdA9sJJRllhhhCcIJIM0J01CNCti7ctM9ibF4dDjKC5UgQ6cxBjJFEwBlFVFJMvjE8FAJIAAG2CIdDRAEwErbTROA1gqEhhR-eABhAxOvV-ZoicBsJsR5dPb-E5HlScMgeY8o4FTeSOVOJMPoNJWIjWeI3VPFGeIYulAGDAkI7AsIgvCIu5Xlc2Yydk9ueIxI5I2vYxZFY0XYtJNZAQ6DYnC4tNfQYE0qVVdUHWC1NJGk3kuBHYZJVlIYS47AI-NEwFWtUgM2C5OgHvLRVggSP9NnESU0UhAkXJYEj0UoOgGkzIJA1EvBVlYADEwhWAFRMAPvUGFZCECReEOhCMqM-RBhPvA5W0+gN8HUGQUEMpECSfBPHYlCMKXkvBe4kLHUbfKQMiCSYYYyNMiE10mMzMyIbAZs8oSMiE23Dsqo4gToAjREXYCiYdaAXXHE0s+3VIA4ysnpYZe43YvIaIeTESK8EMvwsMoeasneeEM+eVDYCSfcoBSgJIYyYAH5V4uid4sAIEDYCEY0AHUXYgidfwMCGMSIB8j0OkS868sdOnAjVQBZYdeAN4fIAjVc8qMkYdQbUE4AEotoOgcEp4GALwzJKE-fAxLMvALMrMl-QEio-UwqMY1UWOfYbKB9JICEGAJyWZQpeQMoHcwePcki6pMYxsqAYYFqP3aUTNHEp-YdbAbi3it4gjGEssuExEodbM+vRvESe4sAAxPAcASchAZAVIG0O0AWR0Z0MgfAIgQMAWagZMO8HgGk5sM4XHc6XsaNCWMQZSvvIAA


# cintel-05-cintel
# Module 5 Building Apps with Live Data &amp; Continuous Intelligence
#**Example as built during 5.2 Deques**
import plotly.express as px
from shiny.express import input, ui
from shinywidgets import render_plotly
from collections import deque

# Create an empty deque
empty_deque = deque()
print(empty_deque) 

# Create a deque by passing in a list with values
xchg_deque_F = deque( [18.7297, 18.6824, 19.1046, 19.7852, 18.2222] )
print(xchg_deque_F)  

#append elements from the deque
#append() method adds to the end of the deque
#appendleft() method adds to the beginning of the deque

xchg_deque_F.append(18.0000)
xchg_deque_F.appendleft(18.5000)
xchg_deque_F.append(19.8000)
xchg_deque_F.append(15.0000)
print(xchg_deque_F)

#Remove elements from the deque using pop() method
leftmost_element = xchg_deque_F.popleft()  
print ("leftmost element popped:", leftmost_element)
print ("Updated deque:", xchg_deque_F)

#Call the length of the deque
len(xchg_deque_F) 
print (len(xchg_deque_F))


# Initialize deque with a max length of 3 to store last 3 stock prices
msft_prices = deque(maxlen=3)

# Clear the deque (we might call this at the start of a new day)
msft_prices.clear()

# Simulate updating the stock price with new values
msft_prices.append(310.35)
print("MSFT stock prices:", list(msft_prices))

msft_prices.append(312.31)
print("MSFT stock prices:", list(msft_prices))

msft_prices.append(315.25)
print("MSFT stock prices:", list(msft_prices))

msft_prices.append(317.41)
print("MSFT stock prices:", list(msft_prices))

5.3 Simulating Interactive Data Antarctica Example
# --------------------------------------------
# Imports at the top - PyShiny EXPRESS VERSION
# --------------------------------------------

# From shiny, import just reactive and render
from shiny import reactive, render

# From shiny.express, import just ui
from shiny.express import ui

# Imports from Python Standard Library to simulate live data
import random
from datetime import datetime

# --------------------------------------------
# Import icons as you like
# --------------------------------------------

from faicons import icon_svg
# --------------------------------------------
# SET UP THE REACTIVE CONTENT
# --------------------------------------------

# --------------------------------------------
# PLANNING: We want to get a fake temperature and 
# Time stamp every N seconds. 
# For now, we'll avoid storage and just 
# Try to get the fake live data working and sketch our app. 
# We can do all that with one reactive calc.
# Use constants for update interval so it's easy to modify.
# ---------------------------------------------------------

# --------------------------------------------
# First, set a constant UPDATE INTERVAL for all live data
# Constants are usually defined in uppercase letters
# Use a type hint to make it clear that it's an integer (: int)
# --------------------------------------------
UPDATE_INTERVAL_SECS: int = 1
# --------------------------------------------

# Initialize a REACTIVE CALC that our display components can call
# to get the latest data and display it.
# The calculation is invalidated every UPDATE_INTERVAL_SECS
# to trigger updates.

# It returns everything needed to display the data.
# Very easy to expand or modify.
# (I originally looked at REACTIVE POLL, but this seems to work better.)
# --------------------------------------------

@reactive.calc()
def reactive_calc_combined():

    # Invalidate this calculation every UPDATE_INTERVAL_SECS to trigger updates
    reactive.invalidate_later(UPDATE_INTERVAL_SECS)

    # Data generation logic. Get random between -18 and -16 C, rounded to 1 decimal place
    temp = round(random.uniform(-18, -16), 1)

    # Get a timestamp for "now" and use string format strftime() method to format it
    #%Y year, %m month, etc 
    timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")

    latest_dictionary_entry = {"temp": temp, "timestamp": timestamp}

    # Return everything we need
    return latest_dictionary_entry

# ------------------------------------------------
# Define the Shiny UI Page layout - Page Options
# ------------------------------------------------

# Call the ui.page_opts() function
# Set title to a string in quotes that will appear at the top
# Set fillable to True to use the whole page width for the UI

ui.page_opts(title="PyShiny Express: Live Data (Basic)", fillable=True)

# ------------------------------------------------
# Define the Shiny UI Page layout - Sidebar
# ------------------------------------------------

# Sidebar is typically used for user interaction/information
# Note the with statement to create the sidebar followed by a colon
# Everything in the sidebar is indented consistently

with ui.sidebar(open="open"):
    ui.h2("Antarctic Explorer", class_="text-center")
    ui.p(
        "A demonstration of real-time temperature readings in Antarctica.",
        class_="text-center",
    )

#---------------------------------------------------------------------
# In Shiny Express, everything not in the sidebar is in the main panel
#---------------------------------------------------------------------


ui.h2("Current Temperature")

@render.text
def display_temp():
    """Get the latest reading and return a temperature string"""
    latest_dictionary_entry = reactive_calc_combined()
    return f"{latest_dictionary_entry['temp']} C"

ui.p("warmer than usual")

icon_svg("sun")

ui.hr()

ui.h2("Current Date and Time")

@render.text
def display_time():
    """Get the latest reading and return a timestamp string"""
    latest_dictionary_entry = reactive_calc_combined()
    return f"{latest_dictionary_entry['timestamp']}"
